<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>EnclaveMailHeader</title>
<link href="../../../../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../";</script><script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async="async"></script><link href="../../../styles/style.css" rel="Stylesheet"><link href="../../../styles/logo-styles.css" rel="Stylesheet"><link href="../../../styles/jetbrains-mono.css" rel="Stylesheet"><link href="../../../styles/main.css" rel="Stylesheet"><script type="text/javascript" src="../../../scripts/clipboard.js" async="async"></script><script type="text/javascript" src="../../../scripts/navigation-loader.js" async="async"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" async="async"></script><script type="text/javascript" src="../../../scripts/main.js" async="async"></script><link href="../../../images/docs_logo.svg"><link href="../../../images/arrow_down.svg">  </head>
  <body>
    <div id="container">
      <div id="leftColumn"><a href="../../../index.html">
          <div id="logo"></div>
        </a>
        <div id="paneSearch"></div>
        <div id="sideMenu"></div>
      </div>
      <div id="main">
        <div id="leftToggler"><span class="icon-toggler"></span></div>
<script type="text/javascript" src="../../../scripts/main.js"></script>        <div class="main-content" id="content" pageIds="Conclave 1.1::com.r3.conclave.mail/EnclaveMailHeader///PointingToDeclaration//-654294413">
          <div class="navigation-wrapper" id="navigation-wrapper">
            <div class="breadcrumbs"><a href="../../../index.html">Conclave 1.1</a>/<a href="../index.html">com.r3.conclave.mail</a>/<a href="index.html">EnclaveMailHeader</a></div>
            <div class="pull-right d-flex">
              <div id="searchBar"></div>
            </div>
          </div>
          <div class="cover ">
            <h1 class="cover"><span>Enclave</span><wbr></wbr><span>Mail</span><wbr></wbr><span>Header</span></h1>
            <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dokkaHtml/conclave"><div class="symbol monospace">public interface <a href="index.html">EnclaveMailHeader</a><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Access to the headers on a mail.</p><p class="paragraph">The data isn't signed, it's authenticated data provided to the AES/GCM algorithm. This means it's tamperproof only to the holder of the receiving private key, not anyone else.</p><p class="paragraph">Therefore the data may be authenticated or unauthenticated, depending on how you obtained this object. If the mail was delivered into the enclave then the headers were checked, and thus can be treated as authentic (not tampered with by the host).</p><p class="paragraph">From the host you can read this data using <a href="../-mail/get-unauthenticated-header.html">Mail.getUnauthenticatedHeader</a> but you have no guarantee it wasn't tampered with in transmission from the client, unless the path between the client and host is protected by another layer of encryption/authentication, such as TLS. For this reason we recommend that mail is always sent over an encrypted channel between client and host, even though mail is itself also encrypted i.e. there are two layers, one for protecting client&lt;-&gt;host and one for protecting client&lt;-&gt;enclave. TLS isn't used directly into the enclave for reasons discussed further in the documentation.</p></div></div>
          </div>
          <div class="tabbedcontent">
            <div class="tabs-section" tabs-section="tabs-section"><button class="section-tab" data-active="" data-togglable="Methods">Methods</button><button class="section-tab" data-togglable="Inheritors">Inheritors</button></div>
            <div class="tabs-section-body">
              <h2 class="">Methods</h2>
              <div class="table" data-togglable="Methods"><a data-name="1229054355%2FFunctions%2F-654294413" anchor-label="getEnvelope" id="1229054355%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a>
                <div class="table-row" data-filterable-current=":dokkaHtml/conclave" data-filterable-set=":dokkaHtml/conclave">
                  <div class="main-subrow keyValue ">
                    <div class=""><span class="inline-flex"><a href="get-envelope.html">getEnvelope</a><span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1229054355%2FFunctions%2F-654294413"></span>
                          <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                        </span></span></div>
                    <div>
                      <div class="title"><div class="divergent-group" data-filterable-current=":dokkaHtml/conclave" data-filterable-set=":dokkaHtml/conclave"><div class="with-platform-tags"><span class="pull-right"></span></div>

  <div>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dokkaHtml/conclave"><div class="symbol monospace block">abstract <span data-unresolved-link="/byte[]///PointingToDeclaration/">byte[]</span> <a href="get-envelope.html">getEnvelope</a>()<span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
<a data-name="1229054355%2FFunctions%2F-654294413" anchor-label="getEnvelope" id="1229054355%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a><div class="brief "><a data-name="1229054355%2FFunctions%2F-654294413" anchor-label="getEnvelope" id="1229054355%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a><p class="paragraph">Extension area for apps to put whatever additional fields or data they would like. Like with the other headers, the envelope is not encrypted but is authenticated, so intermediaries and the untrusted host cannot tamper with it. This is useful to assist with protocols where the untrusted host needs to collaborate with the enclave on each message.</p></div></div>
</div>
                    </div>
                  </div>
                </div>
<a data-name="-1916161095%2FFunctions%2F-654294413" anchor-label="getSequenceNumber" id="-1916161095%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a>
                <div class="table-row" data-filterable-current=":dokkaHtml/conclave" data-filterable-set=":dokkaHtml/conclave">
                  <div class="main-subrow keyValue ">
                    <div class=""><span class="inline-flex"><a href="get-sequence-number.html">getSequenceNumber</a><span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1916161095%2FFunctions%2F-654294413"></span>
                          <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                        </span></span></div>
                    <div>
                      <div class="title"><div class="divergent-group" data-filterable-current=":dokkaHtml/conclave" data-filterable-set=":dokkaHtml/conclave"><div class="with-platform-tags"><span class="pull-right"></span></div>

  <div>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dokkaHtml/conclave"><div class="symbol monospace block">abstract <span data-unresolved-link="/long///PointingToDeclaration/">long</span> <a href="get-sequence-number.html">getSequenceNumber</a>()<span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
<a data-name="-1916161095%2FFunctions%2F-654294413" anchor-label="getSequenceNumber" id="-1916161095%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a><div class="brief "><a data-name="-1916161095%2FFunctions%2F-654294413" anchor-label="getSequenceNumber" id="-1916161095%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a><p class="paragraph">The sequence number should be unique and incrementing within the scope of a single topic and sender. Enclaves will check that delivered mail has incrementing sequence numbers to ensure the untrusted host isn't dropping or re-ordering messages, which could otherwise be exploited in an attack.</p><p class="paragraph">Note that the sequence number is not used as an initialization vector for encryption, so repeated use of the same number does not risk leaking bytes, only confusing the enclave and/or host.</p></div></div>
</div>
                    </div>
                  </div>
                </div>
<a data-name="-17635448%2FFunctions%2F-654294413" anchor-label="getTopic" id="-17635448%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a>
                <div class="table-row" data-filterable-current=":dokkaHtml/conclave" data-filterable-set=":dokkaHtml/conclave">
                  <div class="main-subrow keyValue ">
                    <div class=""><span class="inline-flex"><a href="get-topic.html">getTopic</a><span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-17635448%2FFunctions%2F-654294413"></span>
                          <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                        </span></span></div>
                    <div>
                      <div class="title"><div class="divergent-group" data-filterable-current=":dokkaHtml/conclave" data-filterable-set=":dokkaHtml/conclave"><div class="with-platform-tags"><span class="pull-right"></span></div>

  <div>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dokkaHtml/conclave"><div class="symbol monospace block">abstract <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html">String</a> <a href="get-topic.html">getTopic</a>()<span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
<a data-name="-17635448%2FFunctions%2F-654294413" anchor-label="getTopic" id="-17635448%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a><div class="brief "><a data-name="-17635448%2FFunctions%2F-654294413" anchor-label="getTopic" id="-17635448%2FFunctions%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a><p class="paragraph">The topic can be used to distinguish different streams of mail from the same client. It can be thought of as equivalent to an email subject. Topics are scoped per-sender. The client can send multiple streams of related mail by using a different topic for each stream, and it can do this concurrently. The topic is not parsed by Conclave and, to avoid replay attacks, should never be reused for an unrelated set of mails in the future. A good value might thus contain a random UUID. Topics may be logged and used by your software to route or split mail streams in useful ways.</p><p class="paragraph">There must be a topic and it cannot be empty, but if you don't need this feature then the pre-filled value of &quot;default&quot; is fine. It has a maximum length of 256 characters. It should contain only the following characters: a-zA-Z0-9 and - but no others. This allows the topic to be logged, used as a file name, fed directly into MQ engines and so on.</p></div></div>
</div>
                    </div>
                  </div>
                </div>
              </div>
              <h2 class="">Inheritors</h2>
              <div class="table" data-togglable="Inheritors"><a data-name="1689314027%2FInheritors%2F-654294413" anchor-label="EnclaveMail" id="1689314027%2FInheritors%2F-654294413" data-filterable-set=":dokkaHtml/conclave"></a>
                <div class="table-row" data-filterable-current=":dokkaHtml/conclave" data-filterable-set=":dokkaHtml/conclave">
                  <div class="main-subrow keyValue ">
                    <div class=""><span class="inline-flex"><a href="../-enclave-mail/index.html">EnclaveMail</a><span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1689314027%2FInheritors%2F-654294413"></span>
                          <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                        </span></span></div>
                    <div></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer"><span class="go-to-top-icon"><a href="#content"></a></span><span><a href="https://docs.conclave.net">&#60;&#60; Back to Conclave documentation</a></span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span></div>
      </div>
    </div>
  </body>
</html>

